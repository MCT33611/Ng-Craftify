import{a as oe,b as ne}from"./chunk-Y4GASUIQ.js";import{ga as re,r as Z,s as ee,u as te,v as ie}from"./chunk-QFBWRPON.js";import{B as Q,C as $,E as A,G as H,I as J,J as K,N as W,O as X,P as Y,x as B,z as G}from"./chunk-WEBSOFYO.js";import{$b as R,Ab as p,Ba as P,Bb as d,Fb as b,Ib as _,Kb as u,Kc as L,Lb as I,Lc as z,Mb as k,Nb as w,Pb as D,Qb as N,Rb as T,Rc as j,Ta as x,Tb as m,Ub as g,Vb as V,Vc as q,Wa as n,Xa as O,ec as C,fc as y,ja as U,nb as f,pb as s,qa as M,ra as v,sa as h,zb as l}from"./chunk-JPTIIQB7.js";import{a as F,b as E}from"./chunk-YIRVVMYZ.js";var le=["ctxProvider"],ae=["*"];function pe(r,a){if(r&1){let t=b();l(0,"div",14),d(1,"img",15),l(2,"button",16),_("click",function(){let i=v(t).$implicit,e=u();return h(e.handleRemoveClick(i.uuid))}),m(3,"\xD7"),p()()}if(r&2){let t=a.$implicit;n(),w("alt",t==null||t.fileInfo==null?null:t.fileInfo.originalFilename),s("src",t.cdnUrl+"/-/preview/-/resize/x200/",x)("title",t==null||t.fileInfo==null?null:t.fileInfo.originalFilename)}}function se(r,a){if(r&1&&(l(0,"div",14),d(1,"img",17),p()),r&2){let t=u();n(),s("src",t.data==null?null:t.data.profilePicture,x)("title",t.data==null?null:t.data.profilePicture)}}function me(r,a){if(r&1&&(l(0,"mat-error"),m(1),C(2,"uppercase"),l(3,"strong"),m(4,"required"),p()()),r&2){let t=u().$implicit;n(),V("",y(2,1,t)," is ")}}function ce(r,a){if(r&1&&(l(0,"div",18)(1,"mat-form-field",19)(2,"mat-label"),m(3),C(4,"uppercase"),p(),d(5,"input",20),f(6,me,5,3,"mat-error",21),p()()),r&2){let t,o=a.$implicit,i=u();n(3),g(y(4,4,o)),n(2),w("placeholder",o),s("formControlName",o),n(),s("ngIf",(t=i.form.get(o))==null?null:t.hasError("required"))}}var Fe=(()=>{let a=class a{constructor(o){this._fb=o,this.showUploader=!0,this.formSubmit=new P,this.files=[],this.handleChangeEvent=i=>{this.files=i.detail.allEntries.filter(e=>e.status==="success")}}ngOnChanges(o){let i={};this.labels.forEach(e=>{i[e]=new A({value:this.data?this.data[e]:"",disabled:this.isDetails},[G.required])}),this.form=this._fb.group(i),this.data?.imageUrls&&this.data.imageUrls.forEach((e,c)=>{let S={cdnUrl:e,uuid:c.toString()};this.files.push(S)}),!this.isDetails&&this.showUploader&&(oe(ne),this.ctxProviderRef.nativeElement.addEventListener("change",this.handleChangeEvent))}ngOnDestroy(){this.ctxProviderRef.nativeElement.removeEventListener("change",this.handleChangeEvent)}handleRemoveClick(o){this.files=this.files.filter(i=>i.uuid!==o)}onSubmit(){this.formSubmit.emit(E(F({},this.form.value),{imageUrls:this.files.map(o=>o.cdnUrl)}))}};a.\u0275fac=function(i){return new(i||a)(O(W))},a.\u0275cmp=U({type:a,selectors:[["app-ui-upsert-form"]],viewQuery:function(i,e){if(i&1&&D(le,7),i&2){let c;N(c=T())&&(e.ctxProviderRef=c.first)}},inputs:{isDetails:"isDetails",showUploader:"showUploader",title:"title",description:"description",labels:"labels",data:"data"},outputs:{formSubmit:"formSubmit"},standalone:!0,features:[M,R],ngContentSelectors:ae,decls:18,vars:8,consts:[["ctxProvider",""],[1,"max-w-lg","mx-auto","p-6","rounded-md","w-[100vw]"],[1,"text-3xl","font-bold","text-center","mb-4"],[1,"text-lg","mb-4"],[1,"previews"],["class","preview",4,"ngFor","ngForOf","ngForTrack"],["class","preview",4,"ngIf"],[1,"p-3"],["ctx-name","my-uploader","pubkey","f13c51c57d817b68e829","max-local-file-size-bytes","10000000","img-only","true","source-list","local, url, gdrive, gphotos"],["ctx-name","my-uploader",1,"my-config"],["ctx-name","my-uploader"],[3,"ngSubmit","formGroup"],["class","mb-4",4,"ngFor","ngForOf"],["type","submit",1,"bg-green-500","hover:bg-green-600","text-white","font-bold","py-2","px-4","rounded",3,"hidden"],[1,"preview"],[1,"preview-image",3,"src","alt","title"],["type","button",1,"preview-remove-button",3,"click"],["alt","Profile Picture",1,"preview-image",3,"src","title"],[1,"mb-4"],[1,"example-full-width"],["type","text","matInput","",3,"formControlName","placeholder"],[4,"ngIf"]],template:function(i,e){if(i&1){let c=b();I(),l(0,"div",1)(1,"h2",2),m(2),p(),l(3,"p",3),m(4),p(),k(5),l(6,"div",4),f(7,pe,4,3,"div",5)(8,se,2,2,"div",6),p(),l(9,"div",7),d(10,"lr-config",8)(11,"lr-file-uploader-regular",9)(12,"lr-upload-ctx-provider",10,0),p(),l(14,"form",11),_("ngSubmit",function(){return v(c),h(e.onSubmit())}),f(15,ce,7,6,"div",12),l(16,"button",13),m(17," Submit "),p()()()}i&2&&(n(2),g(e.title),n(2),g(e.description),n(3),s("ngForOf",e.files)("ngForTrack",e.file),n(),s("ngIf",e.data==null?null:e.data.profilePicture),n(6),s("formGroup",e.form),n(),s("ngForOf",e.labels),n(),s("hidden",e.isDetails))},dependencies:[j,q,L,z,Y,H,B,Q,$,J,K,X,re,ie,te,Z,ee],styles:[".example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.my-config[_ngcontent-%COMP%]{--darkmode: 0;--h-accent: 144;--s-accent: 67%;--l-accent: 57%}.previews[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;width:100%;margin-top:12px}.dark-mode-enabled[_ngcontent-%COMP%]{--darkmode: 1;--h-accent: 33.3;--s-accent: 100%;--l-accent: 60.78%;--clr-btn-bgr-primary: var(--ui-action-button-background);--clr-btn-txt-primary: var(--ui-action-button-text-color)}.preview[_ngcontent-%COMP%]{position:relative}.preview-remove-button[_ngcontent-%COMP%]{position:absolute;right:-8px;top:-8px;width:18px;height:18px;padding:0;font-size:16px;line-height:1;font-family:monospace;border:1px solid var(--ui-control-border-color-default);border-radius:8px;background:var(--ui-control-background-color);box-shadow:0 0 16px 0 var(--ui-control-box-shadow-color);color:var(--ui-control-text-color);cursor:pointer}.preview-remove-button[_ngcontent-%COMP%]:hover, .preview-remove-button[_ngcontent-%COMP%]:focus{background:var(--ui-control-background-color);outline:1px solid var(--ui-control-outline-color-focus)}.preview-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:8px;object-fit:cover}"]});let r=a;return r})();export{Fe as a};
