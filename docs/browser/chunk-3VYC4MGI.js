import{a as _e,b as he,c as Y}from"./chunk-U3DNLFKV.js";import{a as Z}from"./chunk-TKLMFZ6Z.js";import{a as y,c as x,h as ge}from"./chunk-BWDK4YJ7.js";import{a as F}from"./chunk-74CHJCYH.js";import{c as ue}from"./chunk-PS6BIUUN.js";import{B as I,C as j,G as R,I as A,J as q,N as M,O as ce,P as fe,o as se,p as T,q as W,s as J,t as de,w as pe,x as k,z as _}from"./chunk-WEBSOFYO.js";import{$ as B,$b as le,Ab as n,Bb as p,Fb as re,Ib as E,Kb as g,Lc as ae,Tb as m,V as P,Vc as me,Wa as s,Xa as c,ea as ie,f as N,ja as C,ka as z,nb as u,pb as S,ra as oe,rb as b,sa as ne,ub as d,zb as r}from"./chunk-JPTIIQB7.js";import{j as te}from"./chunk-YIRVVMYZ.js";var be=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=C({type:t,selectors:[["app-layout"]],decls:5,vars:0,consts:[[1,"h-screen","flex","justify-center","md:justify-center","lg:justify-between","items-center","p-3","gap-4","text-nowrap"],[1,"bg-[#1A826A]","shadow-md","rounded-lg","h-full","px-8","py-14","hidden","sm:flex","md:hidden","lg:flex","flex-col","justify-center","text-white","gap-1"],[1,"w-full","flex","justify-center","items-center","p-2"],["src","../../../../../assets/images/Group 31.png","alt","login intro photo",1,"w-[90%]","md:w-[60%]"]],template:function(o,l){o&1&&(r(0,"div",0),p(1,"router-outlet"),r(2,"div",1)(3,"div",2),p(4,"img",3),n()()())},dependencies:[se]});let e=t;return e})();var H=(()=>{let t=class t{constructor(i,o,l){this._auth=i,this._router=o,this._alert=l}ngOnInit(){google.accounts.id.initialize({client_id:de.GoogleClientId,callback:this.handleCredentialResponse.bind(this)}),google.accounts.id.renderButton(document.getElementById("google-btn"),{theme:"filled_blue",size:"large",width:"100%"}),google.accounts.id.prompt(i=>{})}handleCredentialResponse(i){return te(this,null,function*(){this._auth.loginWithGoogle(i.credential).subscribe({next:o=>{this.navigateBasedOnRole(o.user.role)},error:o=>{console.log(o),this._alert.error(`${o.status}`)}})})}navigateBasedOnRole(i=x.Role_Customer){switch(i){case x.Role_Admin:this._router.navigate(["/admin"]);break;case x.Role_Customer:this._router.navigate(["/customer"]);break;case x.Role_Worker:this._router.navigate(["/worker"]);break;default:this._router.navigate(["/customer"])}}};t.\u0275fac=function(o){return new(o||t)(c(y),c(T),c(F))},t.\u0275cmp=C({type:t,selectors:[["app-google-login-button"]],standalone:!0,features:[le],decls:1,vars:0,consts:[["id","google-btn"]],template:function(o,l){o&1&&p(0,"div",0)}});let e=t;return e})();function Fe(e,t){e&1&&(r(0,"p",18),m(1,"email is required"),n())}function Ee(e,t){e&1&&(r(0,"p",18),m(1,"it is not a email"),n())}function Ne(e,t){if(e&1&&u(0,Fe,2,0,"p",18)(1,Ee,2,0,"p",18),e&2){let a,i,o=g();d(0,(a=o.loginForm.get("email"))!=null&&a.hasError("required")?0:-1),s(),d(1,(i=o.loginForm.get("email"))!=null&&i.hasError("email")?1:-1)}}function Pe(e,t){e&1&&(r(0,"p",18),m(1,"Password is required"),n())}function Te(e,t){if(e&1&&u(0,Pe,2,0,"p",18),e&2){let a,i=g();d(0,(a=i.loginForm.get("password"))!=null&&a.hasError("required")?0:-1)}}var ve=(()=>{let t=class t{constructor(i,o,l,f,h){this._fb=i,this._auth=o,this._router=l,this._alert=f,this._token=h,this.profileStore=ie(ge),this.destroy$=new N,this.loginForm=this._fb.group({email:["",[_.required,_.email]],password:["",_.required],rememberMe:[!1]})}onSubmit(){if(this.loginForm.valid){let i=this.loginForm.value;this._auth.login(i).pipe(P(this.destroy$)).subscribe({next:o=>{this.navigateBasedOnRole(o.user.role)},error:o=>{this._alert.error(`${o.status}: Invalid credentials`)}})}else this._alert.warning("Form is not valid")}navigateBasedOnRole(i=x.Role_Customer){switch(i){case x.Role_Admin:this._router.navigate(["/admin"]);break;case x.Role_Customer:this._router.navigate(["/customer"]);break;case x.Role_Worker:this._router.navigate(["/worker"]);break;default:this._router.navigate(["/customer"])}}onRememberMeToggle(i){let o=i.target.checked;this._token.setRememberMe(o.toString())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(o){return new(o||t)(c(M),c(y),c(T),c(F),c(ue))},t.\u0275cmp=C({type:t,selectors:[["app-sign-in"]],decls:30,vars:7,consts:[[1,"md:w-full"],[1,"text-2xl","font-bold","text-center","mb-6"],[1,"login-form",3,"submit","formGroup"],[1,"mb-6"],["for","email",1,"text-gray-700","block","mb-2"],["type","email","id","email","formControlName","email",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:border-blue-500","focus:outline-none"],["for","password",1,"text-gray-700","block","mb-2"],["type","password","id","password","formControlName","password",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:border-blue-500","focus:outline-none"],[1,"flex","items-center","mb-6"],["type","checkbox","id","rememberMe","formControlName","rememberMe",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500","focus:ring-2",3,"change"],["for","rememberMe",1,"ml-2","text-sm","font-medium","text-gray-900"],[1,"flex","justify-between","items-center","mb-6"],["routerLink","/auth/forgot-password",1,"text-blue-500","hover:text-blue-700","text-sm","block","mt-2"],["routerLink","/auth/sign-up",1,"text-blue-500","hover:text-blue-700","text-sm"],["type","submit",1,"w-full","bg-[#1A826A]","text-white","font-semibold","py-3","rounded-lg","hover:bg-green-700","focus:outline-none","focus:bg-green-700","transition","duration-300"],[1,"flex","flex-col","items-center","w-full","gap-2","p-3"],[1,"text-thin","text-gray-500"],[1,"flex","gap-2"],[1,"text-red-500","text-thin"]],template:function(o,l){if(o&1&&(r(0,"div",0)(1,"h2",1),m(2,"Sign in to Your Account"),n(),r(3,"form",2),E("submit",function(){return l.onSubmit()}),r(4,"div",3)(5,"label",4),m(6,"Email Address"),n(),p(7,"input",5),u(8,Ne,2,2),n(),r(9,"div",3)(10,"label",6),m(11,"Password"),n(),p(12,"input",7),u(13,Te,1,1),n(),r(14,"div",8)(15,"input",9),E("change",function(h){return l.onRememberMeToggle(h)}),n(),r(16,"label",10),m(17,"Remember me"),n()(),r(18,"div",11)(19,"a",12),m(20,"Forgot Password?"),n(),r(21,"a",13),m(22,"Create an account"),n()(),r(23,"button",14),m(24,"Login"),n()(),r(25,"div",15)(26,"p",16),m(27," or continue with "),n(),r(28,"div",17),p(29,"app-google-login-button"),n()()()),o&2){let f,h,v,w;s(3),S("formGroup",l.loginForm),s(4),b("border-red-500",((f=l.loginForm.get("email"))==null?null:f.invalid)&&((f=l.loginForm.get("email"))==null?null:f.touched)),s(),d(8,(h=l.loginForm.get("email"))!=null&&h.invalid&&((h=l.loginForm.get("email"))!=null&&h.touched)?8:-1),s(4),b("border-red-500",((v=l.loginForm.get("password"))==null?null:v.invalid)&&((v=l.loginForm.get("password"))==null?null:v.touched)),s(),d(13,(w=l.loginForm.get("password"))!=null&&w.invalid&&((w=l.loginForm.get("password"))!=null&&w.touched)?13:-1)}},dependencies:[W,R,k,pe,I,j,A,q,H]});let e=t;return e})();function ee(e){return/^[a-zA-Z\s]*$/.test(e.value)?null:{containsNumbersOrSpecialCharacters:!0}}function ke(e,t){e&1&&(r(0,"p",23),m(1,"email is required"),n())}function Ie(e,t){e&1&&(r(0,"p",23),m(1,"it is not a email"),n())}function je(e,t){if(e&1&&u(0,ke,2,0,"p",23)(1,Ie,2,0),e&2){let a,i=g();d(0,(a=i.registrationForm.get("email"))!=null&&a.hasError("required")?0:(a=i.registrationForm.get("email"))!=null&&a.hasError("email")?1:-1)}}function Re(e,t){e&1&&(r(0,"p",23),m(1,"firstName is required"),n())}function Ae(e,t){e&1&&(r(0,"p",23),m(1,"please enter a valied number , only contains a-z,A-Z"),n())}function qe(e,t){if(e&1&&u(0,Re,2,0,"p",23)(1,Ae,2,0),e&2){let a,i=g();d(0,(a=i.registrationForm.get("firstName"))!=null&&a.hasError("required")?0:(a=i.registrationForm.get("firstName"))!=null&&a.hasError("containsNumbersOrSpecialCharacters")?1:-1)}}function Me(e,t){e&1&&(r(0,"p",23),m(1,"Last Name is required"),n())}function Ue(e,t){e&1&&(r(0,"p",23),m(1,"please enter a valied number , only contains a-z,A-Z"),n())}function De(e,t){if(e&1&&u(0,Me,2,0,"p",23)(1,Ue,2,0),e&2){let a,i=g();d(0,(a=i.registrationForm.get("lastName"))!=null&&a.hasError("required")?0:(a=i.registrationForm.get("lastName"))!=null&&a.hasError("containsNumbersOrSpecialCharacters")?1:-1)}}function $e(e,t){e&1&&(r(0,"p",23),m(1,"Password is required"),n())}function Ge(e,t){e&1&&(r(0,"p",23),m(1,"your password is too week"),n())}function Ve(e,t){if(e&1&&u(0,$e,2,0,"p",23)(1,Ge,2,0),e&2){let a,i=g();d(0,(a=i.registrationForm.get("password"))!=null&&a.hasError("required")?0:(a=i.registrationForm.get("password"))!=null&&a.hasError("weakPassword")?1:-1)}}function Oe(e,t){e&1&&(r(0,"p",23),m(1,"Confirm Password is required"),n())}function Le(e,t){if(e&1&&u(0,Oe,2,0,"p",23),e&2){let a,i=g();d(0,(a=i.registrationForm.get("confirmPassword"))!=null&&a.hasError("required")?0:-1)}}function Be(e,t){e&1&&(r(0,"p",23),m(1,"Confirm Password is not matching"),n())}var we=(()=>{let t=class t{constructor(i,o,l,f){this._fb=i,this._auth=o,this._alert=l,this._router=f,this.destroy$=new N,this.initForm()}initForm(){this.registrationForm=this._fb.group({email:["",[_.required,_.email]],firstName:["",[_.required,ee]],lastName:["",[_.required,ee]],password:["",[_.required,he]],confirmPassword:["",[_.required]]},{validators:_e})}onSubmit(){if(this.registrationForm.valid){let i={email:this.registrationForm.value.email,firstName:this.registrationForm.value.firstName,lastName:this.registrationForm.value.lastName,Password:this.registrationForm.value.password};this._auth.register(i).pipe(P(this.destroy$)).subscribe({complete:()=>{this._router.navigate([`/auth/otp/${i.email}`])},error:o=>{this._alert.error(`${o.status}: ${o.error.title}`)}})}else this._alert.warning("Form is not valid")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(o){return new(o||t)(c(M),c(y),c(F),c(T))},t.\u0275cmp=C({type:t,selectors:[["app-sign-up"]],decls:43,vars:17,consts:[[1,"md:w-full"],[1,"text-2xl","font-bold","text-center","mb-6"],[1,"text-thin","mb-6"],["routerLink","/auth/sign-in",1,"text-blue-500","font-bold"],[3,"submit","formGroup"],[1,"mb-4"],["for","email",1,"text-gray-700","block","mb-2"],["formControlName","email","type","email","id","email",1,"w-full","px-4","py-2","rounded-lg","border","focus:border-blue-500","focus:outline-none"],[1,"mb-4","flex","gap-2"],[1,"w-1/2"],["for","firstName",1,"text-gray-700","block","mb-2"],["formControlName","firstName","type","text","id","firstName",1,"w-full","px-4","py-2","rounded-lg","border","focus:border-blue-500","focus:outline-none"],["for","lastName",1,"text-gray-700","block","mb-2"],["formControlName","lastName","type","text","id","lastName",1,"w-full","px-4","py-2","rounded-lg","border","focus:border-blue-500","focus:outline-none"],["for","password",1,"text-gray-700","block","mb-2"],["formControlName","password","type","password","id","password",1,"w-full","px-4","py-2","rounded-lg","border","focus:border-blue-500","focus:outline-none"],["for","confirmPassword",1,"text-gray-700","block","mb-2"],["formControlName","confirmPassword","type","password","id","confirmPassword",1,"w-full","px-4","py-2","rounded-lg","border","focus:border-blue-500","focus:outline-none"],["class","text-red-500 text-thin",4,"ngIf"],["type","submit",1,"w-full","bg-[#1A826A]","text-white","font-semibold","py-3","rounded-lg","hover:bg-green-700","focus:outline-none","focus:bg-green-700","transition","duration-300"],[1,"flex","flex-col","items-center","w-full","gap-2","p-3"],[1,"text-thin","text-gray-500"],[1,"flex","gap-2"],[1,"text-red-500","text-thin"]],template:function(o,l){if(o&1&&(r(0,"div",0)(1,"h2",1),m(2,"Sign up"),n(),r(3,"p",2),m(4," If you already have an account register You can "),p(5,"br"),r(6,"a",3),m(7,"Login here !"),n()(),r(8,"form",4),E("submit",function(){return l.onSubmit()}),r(9,"div",5)(10,"label",6),m(11,"Email Address"),n(),p(12,"input",7),u(13,je,2,1),n(),r(14,"div",8)(15,"div",9)(16,"label",10),m(17,"First Name"),n(),p(18,"input",11),u(19,qe,2,1),n(),r(20,"div",9)(21,"label",12),m(22,"Last Name"),n(),p(23,"input",13),u(24,De,2,1),n()(),r(25,"div",5)(26,"label",14),m(27,"Password"),n(),p(28,"input",15),u(29,Ve,2,1),n(),r(30,"div",5)(31,"label",16),m(32,"Confirm Password"),n(),p(33,"input",17),u(34,Le,1,1)(35,Be,2,0,"p",18),n(),r(36,"button",19),m(37," Register "),n()(),r(38,"div",20)(39,"p",21),m(40," or continue with "),n(),r(41,"div",22),p(42,"app-google-login-button"),n()()()),o&2){let f,h,v,w,D,$,G,V,O,L;s(8),S("formGroup",l.registrationForm),s(4),b("border-red-500",((f=l.registrationForm.get("email"))==null?null:f.invalid)&&((f=l.registrationForm.get("email"))==null?null:f.touched)),s(),d(13,(h=l.registrationForm.get("email"))!=null&&h.invalid&&((h=l.registrationForm.get("email"))!=null&&h.touched)?13:-1),s(5),b("border-red-500",((v=l.registrationForm.get("firstName"))==null?null:v.invalid)&&((v=l.registrationForm.get("firstName"))==null?null:v.touched)),s(),d(19,(w=l.registrationForm.get("firstName"))!=null&&w.invalid&&((w=l.registrationForm.get("firstName"))!=null&&w.touched)?19:-1),s(4),b("border-red-500",((D=l.registrationForm.get("lastName"))==null?null:D.invalid)&&((D=l.registrationForm.get("lastName"))==null?null:D.touched)),s(),d(24,($=l.registrationForm.get("lastName"))!=null&&$.invalid&&(($=l.registrationForm.get("lastName"))!=null&&$.touched)?24:-1),s(4),b("border-red-500",((G=l.registrationForm.get("password"))==null?null:G.invalid)&&((G=l.registrationForm.get("password"))==null?null:G.touched)),s(),d(29,(V=l.registrationForm.get("password"))!=null&&V.invalid&&((V=l.registrationForm.get("password"))!=null&&V.touched)?29:-1),s(4),b("border-red-500",((O=l.registrationForm.get("confirmPassword"))==null?null:O.invalid)&&((O=l.registrationForm.get("confirmPassword"))==null?null:O.touched)),s(),d(34,(L=l.registrationForm.get("confirmPassword"))!=null&&L.invalid&&((L=l.registrationForm.get("confirmPassword"))!=null&&L.touched)?34:-1),s(),S("ngIf",l.registrationForm.errors==null?null:l.registrationForm.errors.passwordsDoNotMatch)}},dependencies:[ae,W,R,k,I,j,A,q,H]});let e=t;return e})();function ze(e,t){e&1&&(r(0,"p",9),m(1,"email is required"),n())}function We(e,t){e&1&&(r(0,"p",9),m(1,"it is not a email"),n())}function Ze(e,t){e&1&&(r(0,"p",9),m(1,"it is not a email"),n())}function Ye(e,t){if(e&1&&u(0,ze,2,0,"p",9)(1,We,2,0)(2,Ze,2,0),e&2){let a,i=g(2);d(0,(a=i.forgotForm.get("email"))!=null&&a.hasError("required")?0:(a=i.forgotForm.get("email"))!=null&&a.hasError("email")?1:i.isEmailValid?-1:2)}}function He(e,t){if(e&1){let a=re();r(0,"form",4),E("submit",function(){oe(a);let o=g();return ne(o.onEmailSubmit())}),r(1,"div",5)(2,"label",6),m(3,"Email Address"),n(),p(4,"input",7),u(5,Ye,3,1),n(),r(6,"button",8),m(7," Verify your email "),n()()}if(e&2){let a,i,o=g();S("formGroup",o.forgotForm),s(4),b("border-red-500",((a=o.forgotForm.get("email"))==null?null:a.invalid)&&((a=o.forgotForm.get("email"))==null?null:a.touched)),s(),d(5,(i=o.forgotForm.get("email"))!=null&&i.invalid&&((i=o.forgotForm.get("email"))!=null&&i.touched)?5:-1)}}function Je(e,t){if(e&1&&p(0,"app-password-reset-form",10),e&2){let a,i=g();S("email",(a=i.forgotForm.get("email"))==null?null:a.value)}}var Se=(()=>{let t=class t{constructor(i,o,l){this._fb=i,this._alert=o,this._auth=l,this.isEmailValid=!1,this.destroy$=new N,this.forgotForm=this._fb.group({email:["",[_.required,_.email]]})}onEmailSubmit(){this.forgotForm.valid?this._auth.forgetPassword(this.forgotForm.value.email).pipe(P(this.destroy$)).subscribe({complete:()=>{this.isEmailValid=!0,this._alert.success("Password reset email sent successfully")},error:i=>this._alert.error(`${i.status}: ${i.error.title||"An error occurred"}`)}):this._alert.error("Credentials are not valid")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(o){return new(o||t)(c(M),c(F),c(y))},t.\u0275cmp=C({type:t,selectors:[["app-forgot-password"]],decls:5,vars:1,consts:[[1,"w-full","h-screen","flex","items-center","justify-center"],[1,"flex","items-center","justify-center"],[1,"otp-verification"],[1,"login-form",3,"formGroup"],[1,"login-form",3,"submit","formGroup"],[1,"mb-6"],["for","email",1,"text-gray-700","block","mb-2"],["type","email","id","email","formControlName","email",1,"w-full","px-4","py-2","rounded-lg","border","border-gray-300","focus:border-blue-500","focus:outline-none"],["type","submit",1,"w-full","bg-[#1A826A]","text-white","font-semibold","py-3","rounded-lg","hover:bg-green-700","focus:outline-none","focus:bg-green-700","transition","duration-300"],[1,"text-red-500","text-thin"],[3,"email"]],template:function(o,l){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),u(3,He,8,4,"form",3)(4,Je,1,1),n()()()),o&2&&(s(3),d(3,l.isEmailValid?4:3))},dependencies:[R,k,I,j,A,q,Y]});let e=t;return e})();var Ke=[{path:"",component:be,children:[{path:"",redirectTo:"sign-in",pathMatch:"full"},{path:"sign-in",component:ve},{path:"sign-up",component:we},{path:"otp/:email",component:Z},{path:"forgot-password",component:Se}]}],ye=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=z({type:t}),t.\u0275inj=B({imports:[J.forChild(Ke),J]});let e=t;return e})();var Bt=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=z({type:t}),t.\u0275inj=B({imports:[Z,me,ye,fe,ce,Y]});let e=t;return e})();export{Bt as AuthenticationModule};
