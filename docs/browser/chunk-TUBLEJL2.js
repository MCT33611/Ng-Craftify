import{a as le,b as se,d as ot}from"./chunk-SXC2SHNC.js";import{a as Ze}from"./chunk-Z3R7N7MV.js";import{a as ae}from"./chunk-U4VXN6NI.js";import"./chunk-NS7TX6XP.js";import{a as re}from"./chunk-XVD6PMUX.js";import"./chunk-Y4GASUIQ.js";import{a as B}from"./chunk-MKSDRPFF.js";import{a as nt}from"./chunk-URZ2MFGM.js";import{a as et,b as tt,c as it}from"./chunk-KGIMTHJF.js";import"./chunk-JMRRGIVG.js";import"./chunk-4QQNEIUE.js";import"./chunk-WU2AB4RO.js";import"./chunk-WWWODPH2.js";import"./chunk-HC6MZPB3.js";import"./chunk-LOHYXAXQ.js";import"./chunk-T2AQJATE.js";import"./chunk-426OJ4HC.js";import"./chunk-XYF5LEXT.js";import"./chunk-TLCCCMSN.js";import{a as ne,b as Ye}from"./chunk-HUKVFCEP.js";import{B as ee,C as te,D as ie,U as We,W as ze,Y as Ke,Z as Je,e as j,ga as Qe,h as Ee,i as Pe,j as Te,k as Oe,r as Ne,s as $e,u as He,v as Ge,x as X,y as Y,z as Z}from"./chunk-QFBWRPON.js";import"./chunk-RGNDWIHZ.js";import{a as oe}from"./chunk-TKLMFZ6Z.js";import{d as w,e as L,f as A,g as F,h as Xe}from"./chunk-BWDK4YJ7.js";import{a as Q}from"./chunk-74CHJCYH.js";import{c as T}from"./chunk-PS6BIUUN.js";import{B as Re,C as Ue,G as je,H as Le,I as Ae,J as Fe,N as Be,O as Ve,P as qe,c as be,o as ye,p as Me,q as Ie,s as ce,t as N,u as $,x as De,z as H}from"./chunk-WEBSOFYO.js";import{$ as W,Ab as r,Bb as p,Cb as I,D as q,Db as E,Fb as P,Ib as u,Jc as xe,Kb as _,Kc as K,Lc as J,Sb as ve,Sc as ke,Ta as y,Tb as l,Ub as R,Vb as U,Vc as Se,Wa as s,Xa as v,_ as ue,da as me,ea as f,ec as _e,gc as we,ja as h,ka as z,n as de,nb as S,ob as ge,pb as m,q as D,ra as C,sa as x,uc as Ce,xb as fe,yb as he,zb as a}from"./chunk-JPTIIQB7.js";import"./chunk-J5OMF6R4.js";import"./chunk-KWW2H4SN.js";import"./chunk-7HA5TF5T.js";import"./chunk-MM5QLNJM.js";import"./chunk-H3GX5QFY.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-F5OLUSX4.js";import"./chunk-MCRJI3T3.js";import"./chunk-2SLIWY4J.js";import"./chunk-YUD3CS6H.js";import{a as M,b as G,j as O}from"./chunk-YIRVVMYZ.js";var at=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=h({type:t,selectors:[["app-content"]],decls:2,vars:0,consts:[[1,"content","w-[100vw]"]],template:function(n,o){n&1&&(a(0,"div",0),p(1,"router-outlet"),r())},dependencies:[ye],styles:[".content[_ngcontent-%COMP%]{padding:16px;width:100%}"]});let i=t;return i})();var lt=(()=>{let t=class t{constructor(){this.profileStore=f(Xe),this.token=f(T),this.tokenService=f(T),this.menuItems=[{title:"Dashboard",route:"dashboard",iconSrc:"assets/icons/dashboard.svg"},{title:"Edit Images & Details ",route:"images",iconSrc:"assets/icons/images.svg"},{title:"Bookings Management",route:"requests",iconSrc:"assets/icons/service.svg"},{title:"Messages",route:"chat",iconSrc:"assets/icons/message.svg"},{title:"Reviews and Ratings",route:`reviews/${this.tokenService.getWorkerId()}`,iconSrc:"assets/icons/review.svg"},{title:"Settings",route:"settings",iconSrc:"assets/icons/settings.svg"}]}ngOnInit(){this.profileStore.loadAll()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=h({type:t,selectors:[["app-layout"]],decls:9,vars:1,consts:[["id","home"],[1,"h-screen","flex","flex-col","justify-center","items-start","text-center","font-bold","w-full"],[1,"side-nav-container","flex","justify-start"],["mode","side","opened",""],[3,"menuItems"]],template:function(n,o){n&1&&(p(0,"app-header"),a(1,"section",0)(2,"div",1)(3,"mat-sidenav-container",2)(4,"mat-sidenav",3),p(5,"app-sidebar",4),r(),a(6,"mat-sidenav-content"),p(7,"app-content"),r()()()(),p(8,"app-footer")),n&2&&(s(5),m("menuItems",o.menuItems))},dependencies:[re,ne,Ye,Te,Oe,Pe,at],styles:[".side-nav-container[_ngcontent-%COMP%]{height:100vh;width:100%}"]});let i=t;return i})();var xt={users:null,isLoading:!1},st=L({providedIn:"root"},F(xt),A((i,t=f(ae))=>({loadAll(){return O(this,null,function*(){w(i,{isLoading:!0});try{let e=yield D(t.getAllCustomers());w(i,{users:e,isLoading:!1})}catch(e){console.error("Error fetching customers list",e),w(i,{isLoading:!1})}})}})));var kt={workers:null,isLoading:!1},mt=L({providedIn:"root"},F(kt),A((i,t=f(ae))=>({loadAll(){return O(this,null,function*(){w(i,{isLoading:!0});try{let e=yield D(t.getAllWorkers());w(i,{workers:e,isLoading:!1})}catch(e){console.error("Error fetching workers list",e),w(i,{isLoading:!1})}})}})));var bt=(i,t)=>t.id;function yt(i,t){if(i&1&&(a(0,"tr")(1,"td"),p(2,"img",8),r(),a(3,"td"),l(4),r(),a(5,"td"),l(6),r()()),i&2){let c=t.$implicit;s(2),m("src",c.profilePicture,y),s(2),R(c.firstName),s(2),R(c.email)}}var ct=(()=>{let t=class t{constructor(){this.customersStore=f(st),this.workersStore=f(mt),this.approvedWorkers=Ce(()=>this.workersStore.workers()?.filter(e=>e.approved)??[]),this.customersStore.loadAll(),this.workersStore.loadAll()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=h({type:t,selectors:[["app-dashboard"]],decls:35,vars:0,consts:[[1,"main-content"],[1,"topbar"],[1,"content"],[1,"cards"],[1,"card"],[1,"w-full","flex","justify-center"],["routerLink","../profiles"],[1,"hover:ms-2"],["alt","",1,"rounded-full","w-5",3,"src"]],template:function(n,o){if(n&1&&(a(0,"div",0)(1,"header",1)(2,"h1"),l(3,"Dashboard"),r()(),a(4,"div",2)(5,"div",3)(6,"div",4)(7,"h3"),l(8,"Tasks"),r(),a(9,"p"),l(10,"50 tasks completed"),r()(),a(11,"div",4)(12,"h3"),l(13,"Resources"),r(),a(14,"p"),l(15,"30 resources used"),r()()(),a(16,"table")(17,"thead")(18,"tr")(19,"th"),l(20,"Profile"),r(),a(21,"th"),l(22,"Nom"),r(),a(23,"th"),l(24,"Email"),r()()(),a(25,"tbody"),fe(26,yt,7,3,"tr",null,bt),r(),a(28,"tfoot")(29,"tr")(30,"td",5)(31,"a",6),l(32,"view more "),a(33,"span",7),l(34,">>"),r()()()()()()()()),n&2){let d;s(26),he((d=o.customersStore.users())==null?null:d.slice(0,5))}},dependencies:[Ie,tt],styles:[".dashboard-container[_ngcontent-%COMP%]{display:flex;width:100%}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.topbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.topbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center}.user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 10px 0 0}.content[_ngcontent-%COMP%]{padding:20px;flex:1;background-color:#e9ecef}.cards[_ngcontent-%COMP%]{display:flex;gap:20px}.card[_ngcontent-%COMP%]{flex:1;padding:20px;background-color:#fff;border-radius:5px;box-shadow:0 2px 4px #0000001a;margin:5px}.card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:10px}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;text-align:left;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#f2f2f2}tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;margin-right:10px}a[_ngcontent-%COMP%]:hover{color:#0056b3}"]});let i=t;return i})();var V=(()=>{let t=class t{constructor(e,n){this._tokenService=e,this._http=n}get(){let e=this._tokenService.getWorkerId();return this._http.get(`${N.API_BASE_URL}/api/Profile/worker/${e}`).pipe(q($))}update(e){let n=this._tokenService.getWorkerId();if(!n)return de(()=>new Error("Worker ID is missing"));let o={serviceTitle:e.serviceTitle||"",description:e.description||"",skills:e.skills||"",perHourPrice:e.perHourPrice||0,logoUrl:e.logoUrl||"",smallPreviewImageUrl:e.smallPreviewImageUrl||"",mediumPreviewImageUrl:e.mediumPreviewImageUrl||"",largePreviewImageUrl:e.largePreviewImageUrl||""};return this._http.put(`${N.API_BASE_URL}/api/Profile/worker/${n}`,o).pipe(q(d=>(console.error("Update error:",d),$(d))))}getAllRequest(){let e=this._tokenService.getUserId();return this._http.get(`${N.API_BASE_URL}/api/Booking?userId=${e}`).pipe(q($))}rescheduleBooking(e){return this._http.put(`${N.API_BASE_URL}/api/Booking/${e.id}`,e).pipe(q($))}};t.\u0275fac=function(n){return new(n||t)(me(T),me(be))},t.\u0275prov=ue({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var Et={worker:null,isLoading:!1},pt=L({providedIn:"root"},F(Et),A((i,t=f(V))=>({loadAll(){return O(this,null,function*(){w(i,{isLoading:!0});try{let e=yield D(t.get());e||(e=i.worker()),w(i,{worker:e,isLoading:!1})}catch(e){console.error("Error fetching worker worker",e),w(i,{isLoading:!1})}})}})));function Tt(i,t){i&1&&(a(0,"mat-error"),l(1,"Service title is required"),r())}function Ot(i,t){i&1&&(a(0,"mat-error"),l(1,"Price per hour is required"),r())}function Dt(i,t){i&1&&(a(0,"mat-error"),l(1,"Price per hour cannot be less than 0"),r())}function Rt(i,t){if(i&1){let c=P();a(0,"mat-chip-row",14),u("removed",function(){let n=C(c).$implicit,o=_();return x(o.remove(n))}),l(1),a(2,"button",15)(3,"mat-icon"),l(4,"cancel"),r()()()}if(i&2){let c=t.$implicit;s(),U(" ",c," "),s(),ge("aria-label","remove "+c)}}function Ut(i,t){i&1&&(a(0,"mat-error"),l(1,"Description is required"),r())}var gt=(()=>{let t=class t{constructor(e,n,o){this.fb=e,this.dialogRef=n,this.data=o,this.skills=[],this.separatorKeysCodes=[13,188],this.editForm=this.fb.group({serviceTitle:[o.serviceTitle,H.required],perHourPrice:[o.perHourPrice,[H.required,H.min(0)]],description:[o.description,H.required]}),this.skills=o.skills?o.skills.split(",").map(d=>d.trim()):[]}onCancel(){this.dialogRef.close()}onSave(){if(this.editForm.valid){let e=G(M(M({},this.data),this.editForm.value),{skills:this.skills.join(", ")});this.dialogRef.close(e)}}add(e){let n=(e.value||"").trim();n&&this.skills.push(n),e.chipInput.clear()}remove(e){let n=this.skills.indexOf(e);n>=0&&this.skills.splice(n,1)}};t.\u0275fac=function(n){return new(n||t)(v(Be),v(X),v(Y))},t.\u0275cmp=h({type:t,selectors:[["app-edit-service-modal"]],decls:32,vars:9,consts:[["chipGrid",""],["mat-dialog-title",""],[3,"formGroup"],[1,"w-full"],["matInput","","formControlName","serviceTitle","placeholder","Enter service title"],[4,"ngIf"],["type","number","matInput","","formControlName","perHourPrice","placeholder","Enter price per hour"],["aria-label","Enter your skills"],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New skill",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes"],["matInput","","formControlName","description","placeholder","Enter description"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"removed"],["matChipRemove","","type","button"]],template:function(n,o){if(n&1){let d=P();a(0,"h2",1),l(1,"Edit Service Details"),r(),a(2,"mat-dialog-content")(3,"form",2)(4,"mat-form-field",3)(5,"mat-label"),l(6,"Service Title"),r(),p(7,"input",4),S(8,Tt,2,0,"mat-error",5),r(),a(9,"mat-form-field",3)(10,"mat-label"),l(11,"Price / Hour"),r(),p(12,"input",6),S(13,Ot,2,0,"mat-error",5)(14,Dt,2,0,"mat-error",5),r(),a(15,"mat-form-field",3)(16,"mat-label"),l(17,"Skills"),r(),a(18,"mat-chip-grid",7,0),S(20,Rt,5,2,"mat-chip-row",8),r(),a(21,"input",9),u("matChipInputTokenEnd",function(k){return C(d),x(o.add(k))}),r()(),a(22,"mat-form-field",3)(23,"mat-label"),l(24,"Description"),r(),p(25,"textarea",10),S(26,Ut,2,0,"mat-error",5),r()()(),a(27,"mat-dialog-actions",11)(28,"button",12),u("click",function(){return C(d),x(o.onCancel())}),l(29,"Cancel"),r(),a(30,"button",13),u("click",function(){return C(d),x(o.onSave())}),l(31,"Save"),r()()}if(n&2){let d,g,k,pe,wt=ve(19);s(3),m("formGroup",o.editForm),s(5),m("ngIf",(d=o.editForm.get("serviceTitle"))==null?null:d.hasError("required")),s(5),m("ngIf",(g=o.editForm.get("perHourPrice"))==null?null:g.hasError("required")),s(),m("ngIf",(k=o.editForm.get("perHourPrice"))==null?null:k.hasError("min")),s(6),m("ngForOf",o.skills),s(),m("matChipInputFor",wt)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),s(5),m("ngIf",(pe=o.editForm.get("description"))==null?null:pe.hasError("required")),s(4),m("disabled",!o.editForm.valid)}},dependencies:[K,J,j,Ee,Ge,He,Ne,$e,ee,ie,te,Ke,Je,We,ze,je,De,Le,Re,Ue,Ae,Fe]});let i=t;return i})();var ft=(()=>{let t=class t{constructor(){this.alert=f(Q),this.workerStore=f(pt),this.workerService=f(V),this.dialog=f(Z),this.worker={},this.workerStore.loadAll()}addCardImage(e,n){return G(M({},e),{smallPreviewImageUrl:n?.smallPreviewImageUrl||e?.smallPreviewImageUrl||"https://www.freeiconspng.com/thumbs/upload-icon/upload-icon-25.png"})}fileUploadSuccessHandler(e,n){switch(n){case"logo":this.worker.logoUrl=e;break;case"smallPreview":this.worker.smallPreviewImageUrl=e;break;case"mediumPreview":this.worker.mediumPreviewImageUrl=e;break;case"largePreview":this.worker.largePreviewImageUrl=e;break}}save(){this.workerService.update(this.worker).subscribe({complete:()=>{this.alert.success("All images are saved successfully"),this.worker={},this.workerStore.loadAll()}})}openEditModal(){this.dialog.open(gt,{width:"500px",data:this.workerStore.worker()}).afterClosed().subscribe(n=>{n&&(this.worker=M(M({},this.worker),n),this.save())})}ngOnDestroy(){Object.keys(this.worker).length>0&&confirm("Do you want to save changes before leaving?")&&this.save()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=h({type:t,selectors:[["app-image-management"]],decls:44,vars:11,consts:[[1,"image-management"],[1,"header"],[1,"image-grid"],[1,"full-width-section"],[1,"image-section","logo-section"],[1,"image-container","flex","flex-col","justify-center","items-center","p-3"],[1,"logo-container"],[1,"logo-wrapper"],["alt","Logo",1,"logo-image",3,"src"],[3,"cdnUrl","ctxName"],[1,"image-section","w-full"],[1,"text-lg","md:text-xl","font-semibold","mb-2"],[1,"image-container","flex","flex-col","justify-center","items-center","mb-4","gap-2","p-3"],[3,"worker"],[1,"w-full","flex","justify-center","gap-3"],[1,"flex","flex-col","gap-3"],["size","small",3,"worker"],[1,"w-1/4",3,"worker"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-2"],["mat-raised-button","","color","primary",1,"w-full","sm:w-auto","mt-2","sm:mt-0",3,"click"],[1,"half-width-section"],[1,"image-section"],[1,"image-container"],["alt","Medium Preview",1,"preview-image",3,"src"],["alt","Large Preview",1,"preview-image",3,"src"],[1,"action-buttons"],[1,"save-btn",3,"click"]],template:function(n,o){if(n&1&&(a(0,"div",0)(1,"header",1)(2,"h1"),l(3," Preview & Desing Management"),r()(),a(4,"div",2)(5,"div",3)(6,"div",4)(7,"h2"),l(8,"Logo"),r(),a(9,"div",5)(10,"div",6)(11,"div",7),p(12,"img",8),r()(),a(13,"app-uploader",9),u("cdnUrl",function(g){return o.fileUploadSuccessHandler(g,"logo")}),r()()(),a(14,"div",10)(15,"h2",11),l(16,"Card Preview"),r(),a(17,"div",12),p(18,"app-service-card",13),a(19,"div",14)(20,"div",15),p(21,"app-service-card",16)(22,"app-service-card",16),r(),p(23,"app-service-card-two",17),r(),a(24,"div",18)(25,"app-uploader",9),u("cdnUrl",function(g){return o.fileUploadSuccessHandler(g,"smallPreview")}),r(),a(26,"button",19),u("click",function(){return o.openEditModal()}),l(27," Edit Service Details "),r()()()()(),a(28,"div",20)(29,"div",21)(30,"h2"),l(31,"Medium Preview"),r(),a(32,"div",22),p(33,"img",23),r(),a(34,"app-uploader",9),u("cdnUrl",function(g){return o.fileUploadSuccessHandler(g,"mediumPreview")}),r()(),a(35,"div",21)(36,"h2"),l(37,"Large Preview"),r(),a(38,"div",22),p(39,"img",24),r(),a(40,"app-uploader",9),u("cdnUrl",function(g){return o.fileUploadSuccessHandler(g,"largePreview")}),r()()()(),a(41,"div",25)(42,"button",26),u("click",function(){return o.save()}),l(43,"Save All Images"),r()()()),n&2){let d,g,k;s(12),m("src",o.worker.logoUrl||((d=o.workerStore.worker())==null?null:d.logoUrl)||"https://www.freeiconspng.com/thumbs/upload-icon/upload-icon-25.png",y),s(),m("ctxName","logo-uploader"),s(5),m("worker",o.addCardImage(o.workerStore.worker(),o.worker)),s(3),m("worker",o.addCardImage(o.workerStore.worker(),o.worker)),s(),m("worker",o.addCardImage(o.workerStore.worker(),o.worker)),s(),m("worker",o.addCardImage(o.workerStore.worker(),o.worker)),s(2),m("ctxName","small-preview-uploader"),s(8),m("src",o.worker.mediumPreviewImageUrl||((g=o.workerStore.worker())==null?null:g.mediumPreviewImageUrl)||"https://www.freeiconspng.com/thumbs/upload-icon/upload-icon-25.png",y),s(),m("ctxName","medium-preview-uploader"),s(5),m("src",o.worker.largePreviewImageUrl||((k=o.workerStore.worker())==null?null:k.largePreviewImageUrl)||"https://www.freeiconspng.com/thumbs/upload-icon/upload-icon-25.png",y),s(),m("ctxName","large-preview-uploader")}},dependencies:[j,Ze,le,se],styles:[".image-management[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem;font-family:Arial,sans-serif}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:2rem}.image-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;margin-bottom:2rem}.full-width-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;width:100%}.half-width-section[_ngcontent-%COMP%]{display:flex;gap:2rem;width:100%}.image-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.image-container[_ngcontent-%COMP%]{width:100%;overflow:hidden;border-radius:8px;box-shadow:0 4px 6px #0000001a;margin-bottom:1rem}.logo-container[_ngcontent-%COMP%]{width:160px;height:160px;margin:0 auto}.logo-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;overflow:hidden;display:flex;justify-content:center;align-items:center;background-color:#f0f0f0}.logo-image[_ngcontent-%COMP%], .preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.save-btn[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:12px 24px;font-size:1rem;cursor:pointer;border-radius:4px;transition:background-color .3s}.save-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}h2[_ngcontent-%COMP%]{color:#444;margin-bottom:.5rem;text-align:center}app-uploader[_ngcontent-%COMP%]{margin-top:.5rem}"]});let i=t;return i})();var ht=(()=>{let t=class t{constructor(e,n){this.dialogRef=e,this.data=n}onOtpVerified(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}};t.\u0275fac=function(n){return new(n||t)(v(X),v(Y))},t.\u0275cmp=h({type:t,selectors:[["app-task-completion-dialog"]],decls:9,vars:1,consts:[["mat-dialog-title","",1,"text-xl","font-bold","mb-4"],[1,"mat-typography"],[1,"mb-4"],[3,"otpVerified","email"],["align","end"],["mat-button","",1,"mr-2",3,"click"]],template:function(n,o){n&1&&(a(0,"h2",0),l(1,"Verify Task Completion"),r(),a(2,"mat-dialog-content",1)(3,"p",2),l(4,"Please enter the OTP sent to the customer's email to complete the task."),r(),a(5,"app-otp",3),u("otpVerified",function(){return o.onOtpVerified()}),r()(),a(6,"mat-dialog-actions",4)(7,"button",5),u("click",function(){return o.onCancel()}),l(8,"Cancel"),r()()),n&2&&(s(5),m("email",o.data.email))},dependencies:[oe,j,ee,ie,te]});let i=t;return i})();function jt(i,t){if(i&1){let c=P();I(0),a(1,"button",17),u("click",function(){C(c);let n=_().$implicit,o=_();return x(o.cancelBooking(n))}),p(2,"ion-icon",18),l(3," Cancel "),r(),a(4,"button",19),u("click",function(){C(c);let n=_().$implicit,o=_();return x(o.startMessage(n))}),p(5,"ion-icon",20),l(6," Start Massage "),r(),E()}}function Lt(i,t){i&1&&(I(0),a(1,"button",21),p(2,"ion-icon",22),l(3," Rejected "),r(),E())}function At(i,t){i&1&&(I(0),a(1,"button",23),p(2,"ion-icon",22),l(3," Cancelled "),r(),E())}function Ft(i,t){if(i&1){let c=P();I(0),a(1,"button",24),u("click",function(){C(c);let n=_().$implicit,o=_();return x(o.acceptBooking(n))}),p(2,"ion-icon",25),l(3," Accept "),r(),a(4,"button",26),u("click",function(){C(c);let n=_().$implicit,o=_();return x(o.rejectBooking(n))}),p(5,"ion-icon",27),l(6," Reject "),r(),E()}}function Bt(i,t){i&1&&(I(0),a(1,"button",23),p(2,"ion-icon",22),l(3," Cancelled "),r(),E())}function Vt(i,t){if(i&1){let c=P();I(0),a(1,"button",28),u("click",function(){C(c);let n=_().$implicit,o=_();return x(o.openTaskCompletionDialog(n))}),p(2,"ion-icon",29),l(3," Completed "),r(),E()}}function qt(i,t){if(i&1&&(a(0,"div",5)(1,"div",6)(2,"div",7)(3,"h3",8),l(4),r(),a(5,"span",9),l(6),_e(7,"date"),r()(),a(8,"div",10)(9,"p")(10,"span",11),l(11,"Location:"),r(),l(12),r(),a(13,"p")(14,"span",11),l(15,"Working Time:"),r(),l(16),r(),a(17,"p")(18,"span",11),l(19,"Status:"),r(),a(20,"span",12),l(21),r()(),a(22,"p")(23,"a",13),p(24,"ion-icon",14),l(25," View on Google Maps "),r()()(),a(26,"div",15),S(27,jt,7,0,"ng-container",16)(28,Lt,4,0,"ng-container",16)(29,At,4,0,"ng-container",16)(30,Ft,7,0,"ng-container",16)(31,Bt,4,0,"ng-container",16)(32,Vt,4,0,"ng-container",16),r()()()),i&2){let c=t.$implicit,e=_();s(4),R((c.customer==null?null:c.customer.firstName)||"Customer"),s(2),R(we(7,13,c.date,"medium")),s(6),U(" ",c.locationName,""),s(4),U(" ",c.workingTime," hours"),s(4),m("ngClass",e.getBookingStatus(c.status)),s(),U(" ",e.getBookingStatus(c.status)," "),s(2),m("href",e.getGoogleMapsUrl(c.location),y),s(4),m("ngIf",e.getBookingStatus(c.status)==="Accepted"&&!e.isDatePassed(c.date)),s(),m("ngIf",e.getBookingStatus(c.status)==="Rejected"),s(),m("ngIf",e.getBookingStatus(c.status)==="Pending"&&e.isDatePassed(c.date)),s(),m("ngIf",e.getBookingStatus(c.status)==="Pending"&&!e.isDatePassed(c.date)),s(),m("ngIf",e.getBookingStatus(c.status)==="Cancelled"),s(),m("ngIf",e.getBookingStatus(c.status)==="Accepted")}}function Nt(i,t){i&1&&(a(0,"p",30),l(1," No service requests available at the moment. "),r())}var vt=(()=>{let t=class t{constructor(e,n,o,d,g,k){this.workerService=e,this.chatService=n,this._alert=o,this.router=d,this.dialog=g,this.token=k,this.bookings=[]}ngOnInit(){this.loadBookings()}openTaskCompletionDialog(e){this.dialog.open(ht,{width:"400px",data:{email:e.customer?.email}}).afterClosed().subscribe(o=>{console.log(o),o&&this.completeBooking(e)})}getBookingStatus(e){return B[e]}isDatePassed(e){let n=new Date(e),o=new Date;return o.setHours(0,0,0,0),n<o}cancelBooking(e){e.status=B.Cancelled,this.workerService.rescheduleBooking(e).subscribe({})}loadBookings(){this.workerService.getAllRequest().subscribe({next:e=>{console.log(e),this.bookings=e.$values},error:e=>{console.error("Error fetching bookings:",e)}})}getGoogleMapsUrl(e){let[n,o]=e.split(",");return`https://www.google.com/maps?q=${n},${o}`}acceptBooking(e){console.log("Accepting booking:",e),e.status=B.Accepted,this.workerService.rescheduleBooking(e).subscribe({})}completeBooking(e){e.status=B.Completed,this.workerService.rescheduleBooking(e).subscribe({})}rejectBooking(e){console.log("Rejecting booking:",e),e.status=B.Rejected,this.workerService.rescheduleBooking(e).subscribe({})}startMessage(e){let n=this.token.getUserId(),o=e.customerId;if(!n||!o){this._alert.error("Invalid provider or customer ID");return}this.chatService.createConversation(n,o).subscribe({complete:()=>{this._alert.success("succuss fully create a converstion"),this.router.navigate(["/worker/chat"])},error:d=>{this._alert.error(d.status)}})}};t.\u0275fac=function(n){return new(n||t)(v(V),v(nt),v(Q),v(Me),v(Z),v(T))},t.\u0275cmp=h({type:t,selectors:[["app-request-list"]],decls:6,vars:2,consts:[[1,"container","mx-auto","p-4","sm:p-6","lg:p-8"],[1,"text-3xl","font-bold","mb-8","text-center","text-blue-600"],[1,"space-y-6"],["class","bg-white shadow-md rounded-lg overflow-hidden",4,"ngFor","ngForOf"],["class","text-center text-lg mt-12 text-gray-500",4,"ngIf"],[1,"bg-white","shadow-md","rounded-lg","overflow-hidden"],[1,"p-6"],[1,"flex","flex-wrap","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-500"],[1,"gap-4","text-sm","flex","flex-col","items-start"],[1,"font-medium","text-gray-600"],[3,"ngClass"],["target","_blank","rel","noopener noreferrer",1,"text-blue-500","hover:text-blue-600","transition","flex","items-center",3,"href"],["name","location-outline",1,"mr-1"],[1,"flex","flex-wrap","justify-end","space-x-2","mt-4"],[4,"ngIf"],[1,"px-4","py-2","bg-yellow-500","text-white","rounded","hover:bg-yellow-600","transition","flex","items-center",3,"click"],["name","ban-outline",1,"mr-1"],[1,"px-4","py-2","bg-blue-500","text-white","rounded","hover:bg-blue-600","transition","flex","items-center",3,"click"],["name","play-outline",1,"mr-1"],["disabled","",1,"px-4","py-2","bg-red-500","text-white","rounded","flex","items-center","cursor-not-allowed","opacity-50"],["name","close-circle-outline",1,"mr-1"],["disabled","",1,"px-4","py-2","bg-gray-500","text-white","rounded","flex","items-center","cursor-not-allowed","opacity-50"],[1,"px-4","py-2","bg-green-500","text-white","rounded","hover:bg-green-600","transition","flex","items-center",3,"click"],["name","checkmark-outline",1,"mr-1"],[1,"px-4","py-2","bg-red-500","text-white","rounded","hover:bg-red-600","transition","flex","items-center",3,"click"],["name","close-outline",1,"mr-1"],[1,"px-4","py-2","bg-green-500","text-white","rounded","flex","items-center","cursor-default",3,"click"],["name","checkmark-done-outline",1,"mr-1"],[1,"text-center","text-lg","mt-12","text-gray-500"]],template:function(n,o){n&1&&(a(0,"div",0)(1,"h2",1),l(2,"Service Requests"),r(),a(3,"div",2),S(4,qt,33,16,"div",3),r(),S(5,Nt,2,0,"p",4),r()),n&2&&(s(4),m("ngForOf",o.bookings),s(),m("ngIf",o.bookings.length===0))},dependencies:[xe,K,J,et,ke]});let i=t;return i})();var $t=[{path:"",component:lt,children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:ct},{path:"images",component:ft},{path:"requests",component:vt},{path:"reviews/:Id",component:ot},{path:"chat",loadChildren:()=>import("./chunk-DY6OMFGB.js").then(i=>i.ChatModule)}]}],_t=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=z({type:t}),t.\u0275inj=W({imports:[ce.forChild($t),ce]});let i=t;return i})();var Bn=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=z({type:t}),t.\u0275inj=W({imports:[Se,oe,re,_t,ne,Qe,le,qe,Ve,se,it]});let i=t;return i})();export{Bn as WorkerModule};
