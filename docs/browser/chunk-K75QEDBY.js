import{a as nt}from"./chunk-QCWFXOJC.js";import{a as it}from"./chunk-Z3R7N7MV.js";import"./chunk-Y4GASUIQ.js";import{a as rt,c as ot}from"./chunk-KGIMTHJF.js";import"./chunk-JMRRGIVG.js";import"./chunk-4QQNEIUE.js";import"./chunk-WU2AB4RO.js";import"./chunk-WWWODPH2.js";import"./chunk-HC6MZPB3.js";import"./chunk-LOHYXAXQ.js";import"./chunk-T2AQJATE.js";import"./chunk-426OJ4HC.js";import"./chunk-XYF5LEXT.js";import"./chunk-TLCCCMSN.js";import{a as tt}from"./chunk-HUKVFCEP.js";import{Q as He,R as Ke,S as We,T as Qe,U as Je,W as Xe,Y as Ye,Z as Ze,c as Ve,d as Ae,e as De,ga as et,h as je,r as Ge,s as ze,u as qe,v as Le}from"./chunk-QFBWRPON.js";import"./chunk-RGNDWIHZ.js";import{c as Z}from"./chunk-U3DNLFKV.js";import{a as q,b as O,c as L,h as T}from"./chunk-BWDK4YJ7.js";import{a as N}from"./chunk-74CHJCYH.js";import{c as z}from"./chunk-PS6BIUUN.js";import{B as K,C as W,G as Q,H as Re,I as J,J as X,N as Y,O as $e,P as Be,c as Te,p as E,s as me,t as G,u as Ue,x as H,z as w}from"./chunk-WEBSOFYO.js";import{$ as j,$b as Fe,Ab as n,Ba as be,Bb as u,D as ge,Fb as P,Ib as _,Jc as Ie,Kb as b,Kc as $,Lc as S,Pb as Se,Qb as we,Qc as Oe,Rb as Pe,Sb as le,T as he,Ta as ve,Tb as s,Ub as se,Uc as Ne,Vb as A,Vc as B,Wa as a,Wb as Ee,_ as D,a as de,bc as ae,da as I,ea as d,ec as pe,fc as Me,gc as ke,ja as C,ka as R,nb as f,ob as xe,pb as c,q as ue,qb as ye,r as fe,ra as v,rb as Ce,sa as x,ta as oe,ua as _e,ub as ne,zb as l}from"./chunk-JPTIIQB7.js";import"./chunk-J5OMF6R4.js";import"./chunk-KWW2H4SN.js";import"./chunk-7HA5TF5T.js";import"./chunk-MM5QLNJM.js";import"./chunk-H3GX5QFY.js";import"./chunk-7D6K5XYM.js";import"./chunk-OBXDPQ3V.js";import"./chunk-F5OLUSX4.js";import"./chunk-MCRJI3T3.js";import"./chunk-2SLIWY4J.js";import"./chunk-YUD3CS6H.js";import{a as V,b as re,j as M}from"./chunk-YIRVVMYZ.js";function ft(r,t){if(r&1&&u(0,"img",28),r&2){let m,e=b();c("src",(m=e.profileStore.user())==null?null:m.profilePicture,ve)}}function gt(r,t){r&1&&u(0,"ion-icon",29),r&2&&c("name","person-outline")}function ht(r,t){r&1&&(l(0,"p",30),s(1,"first name is required"),n())}function _t(r,t){if(r&1&&f(0,ht,2,0,"p",30),r&2){let m,e=b();ne(0,(m=e.profileForm.get("firstName"))!=null&&m.hasError("required")?0:-1)}}function bt(r,t){if(r&1&&u(0,"input",31),r&2){let m=b();c("value",m.user.email)}}var lt=(()=>{let t=class t{constructor(){this.profile=d(O),this.router=d(E),this.alert=d(N),this.profileStore=d(T),this.fb=d(Y),this.profileForm=this.fb.group({firstName:["",w.required],lastName:[""],postalCode:[""],state:[""],city:[""]}),this.profileStore.loadAll()}ngOnInit(){this.profile&&(this.profileSubscription=this.profile.get().subscribe({next:e=>{this.user=e,this.user.updatedDate&&this.initializeForm()},error:e=>{console.error("Error retrieving profile:",e)}}))}initializeForm(){this.profileForm=this.fb.group({firstName:[this.user.firstName,w.required],lastName:[this.user.lastName],postalCode:[this.user.postalCode],state:[this.user.state],city:[this.user.city]})}onSubmit(){if(this.profileForm.valid){let e=this.profileForm.value;this.profile.update(e).subscribe({complete:()=>{this.profileStore.loadAll(),this.alert.success("Profile updated successfully")},error:i=>{this.alert.error(`${i.status} : ${i.message}`)}})}else this.alert.error("Invalid form data")}fileUploadSeccessHandler(e){let i={profilePicture:e??""};this.profile.update(i).subscribe({complete:()=>{console.log("checked:"),this.alert.success("Profile picture updated successfully"),this.profileStore.loadAll()},error:o=>this.alert.error(`${o.status} : ${o.error[0].title}`)})}ngOnDestroy(){this.profileSubscription&&this.profileSubscription.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-edit-profile"]],decls:46,vars:7,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"bg-white","rounded-lg","shadow-md","px-8","pb-8"],[1,"flex","justify-between","border-b","border-gray-200","pb-4"],[1,"text-xl","font-bold"],[1,"w-full","flex","flex-col","justify-center","items-center","gap-2","p-2"],[1,"flex","items-center","justify-center","bg-green-500","rounded-full","p-2"],["class","w-32 rounded-full","alt","",3,"src",4,"ngIf"],["class","text-xl text-blue-400 w-28 h-28",3,"name",4,"ngIf"],[3,"cdnUrl"],[3,"submit","formGroup"],[1,"mt-6","grid","grid-cols-1","gap-6"],[1,"flex","gap-2"],[1,"w-full"],["for","firstName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","firstName","formControlName","firstName",1,"mt-1","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","rounded-md","border","border-gray-300","px-3","py-2","shadow-sm"],["for","lastName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","lastName","formControlName","lastName",1,"mt-1","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","rounded-md","border","border-gray-300","px-3","py-2","shadow-sm"],[1,"border-t","border-gray-200","pt-4"],[1,"text-base","font-medium","text-gray-700"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["type","email","id","email","disabled","","class","mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm",3,"value",4,"ngIf"],["for","state",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","state","formControlName","state",1,"mt-1","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","rounded-md","border","border-gray-300","px-3","py-2","shadow-sm"],["for","city",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","city","formControlName","city",1,"mt-1","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","rounded-md","border","border-gray-300","px-3","py-2","shadow-sm"],["for","postalCode",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","postalCode","formControlName","postalCode",1,"mt-1","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","rounded-md","border","border-gray-300","px-3","py-2","shadow-sm"],["type","submit",1,"w-min","py-3","px-6","bg-[#1A826A]","text-white","font-semibold","rounded-lg","hover:bg-green-700","focus:outline-none","focus:bg-green-700","transition","duration-300"],["alt","",1,"w-32","rounded-full",3,"src"],[1,"text-xl","text-blue-400","w-28","h-28",3,"name"],[1,"text-red-500","text-thin"],["type","email","id","email","disabled","",1,"mt-1","focus:ring-indigo-500","focus:border-indigo-500","block","w-full","rounded-md","border","border-gray-300","px-3","py-2","shadow-sm",3,"value"]],template:function(i,o){if(i&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),s(4,"Edit Profile"),n()(),l(5,"div",4)(6,"div",5),f(7,ft,1,1,"img",6)(8,gt,1,1,"ion-icon",7),n(),l(9,"app-uploader",8),_("cdnUrl",function(g){return o.fileUploadSeccessHandler(g)}),n()(),l(10,"form",9),_("submit",function(){return o.onSubmit()}),l(11,"div",10)(12,"div",11)(13,"div",12)(14,"label",13),s(15,"First Name"),n(),u(16,"input",14),f(17,_t,1,1),n(),l(18,"div",12)(19,"label",15),s(20,"Last Name"),n(),u(21,"input",16),n()(),l(22,"div",17)(23,"h2",18),s(24,"Contact"),n(),l(25,"div",10)(26,"div",11)(27,"div",12)(28,"label",19),s(29,"Email"),n(),f(30,bt,1,1,"input",20),n(),l(31,"div",12)(32,"label",21),s(33,"State"),n(),u(34,"input",22),n()(),l(35,"div",11)(36,"div",12)(37,"label",23),s(38,"City"),n(),u(39,"input",24),n(),l(40,"div",12)(41,"label",25),s(42,"Zip Code"),n(),u(43,"input",26),n()(),l(44,"button",27),s(45," Save "),n()()()()()()()),i&2){let p,g,h,y;a(7),c("ngIf",(p=o.profileStore.user())==null?null:p.profilePicture),a(),c("ngIf",!((g=o.profileStore.user())!=null&&g.profilePicture)),a(2),c("formGroup",o.profileForm),a(6),Ce("border-red-500",((h=o.profileForm.get("firstName"))==null?null:h.invalid)&&((h=o.profileForm.get("firstName"))==null?null:h.touched)),a(),ne(17,(y=o.profileForm.get("firstName"))!=null&&y.invalid&&((y=o.profileForm.get("firstName"))!=null&&y.touched)?17:-1),a(13),c("ngIf",o.user==null?null:o.user.email)}},dependencies:[S,Q,H,K,W,J,X,it,rt]});let r=t;return r})();function xt(r,t){if(r&1){let m=P();l(0,"div",6)(1,"button",7),_("click",function(){v(m);let i=b();return x(i.delete())}),s(2," Delete Account "),n(),l(3,"p",8),s(4," this action can't undo "),n()()}}var st=(()=>{let t=class t{constructor(){this.profile=d(O),this.profileStore=d(T),this.alert=d(N),this.router=d(E),this.authService=d(q),this.tokenService=d(z),this.isEmailValid=!1,this.adminRole=L.Role_Admin,this.subscriptions=new de}ngOnInit(){if(this.email=this.tokenService.getUserEmail(),this.email){let e=this.authService.forgetPassword(this.email).subscribe({complete:()=>{this.isEmailValid=!0},error:i=>this.alert.error(`${i.status} : ${i.error[0].description}`)});this.subscriptions.add(e)}else this.alert.error("password reset init : email is undefined !!")}delete(){return M(this,null,function*(){if(yield this.alert.confirm("Are You Sure","Do you want to delete this account?")){let e=this.profile.delete(this.tokenService.getUserId()??"null").subscribe({complete:()=>{this.alert.success("User deleted successfully"),this.authService.logout(),this.router.navigate(["/auth/sign-in"])}});this.subscriptions.add(e)}})}ngOnDestroy(){this.subscriptions.unsubscribe()}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-security"]],decls:6,vars:2,consts:[["id","Security"],[1,"w-full","py-32","flex-col"],[1,"flex","justify-center"],[1,"w-1/2","flex","justify-center","items-center"],[3,"email"],["class","w-1/3 flex flex-col justify-start items-start",4,"ngIf"],[1,"w-1/3","flex","flex-col","justify-start","items-start"],["type","button",1,"w-full","bg-[#ff3a3a]","text-white","font-semibold","py-3","rounded-lg","hover:bg-[#ff6c6c]","focus:outline-none","focus:bg-[#ff6c6c]","transition","duration-300",3,"click"],[1,"text-[#ff3a3a]","font-thin"]],template:function(i,o){if(i&1&&(l(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),u(4,"app-password-reset-form",4),n(),f(5,xt,5,0,"div",5),n()()()),i&2){let p;a(4),c("email",o.email),a(),c("ngIf",((p=o.profileStore.user())==null?null:p.role)!=o.adminRole)}},dependencies:[S,Z]});let r=t;return r})();var te=(()=>{let t=class t{constructor(e){this._router=e}get nativeWindow(){return Ct()}reload(){let e=this._router.url;this._router.navigateByUrl("/empty",{skipLocationChange:!0}).then(()=>{this._router.navigateByUrl(e)})}};t.\u0275fac=function(i){return new(i||t)(I(E))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();function Ct(){return window}var at=(()=>{let t=class t{constructor(e,i,o){this._http=e,this._winRef=i,this._tokenService=o}getOrderId(e,i){return M(this,null,function*(){return yield ue(this._http.get(`${G.API_BASE_URL}/api/Profile/Payment/Init?userId=${e}&planId=${i}`,{responseType:"text"}).pipe(ge(Ue)))})}getPlan(e){return this._http.get(`${G.API_BASE_URL}/api/Plan/${e}`)}pay(e,i,o,p){return M(this,null,function*(){let g,h="",y=this._tokenService.getUserId();try{this.getPlan(e).subscribe(k=>g=k),y&&(h=yield this.getOrderId(y,e),console.log("orderId:",h))}catch(k){console.error("Error fetching plan or order ID:",k),o();return}let U;g&&(U={currency:"INR",name:"Craftity",description:"Subscription Plan",amount:(g.price??0)*100,key:G.RazorpaySettings.KeyId,image:"_https://res.cloudinary.com/dhsvbucth/image/upload/c_crop,h_250,w_250/Screenshot_2024-05-29_110142_rjbfwv.jpg",order_id:JSON.parse(h)?.orderId,prefill:p,theme:{color:"#6466e3"},modal:{escape:!1,ondismiss:()=>{console.log("dismissed"),o()}},handler:k=>{k.razorpay_payment_id?i({paymentId:k.razorpay_payment_id,userId:y,planId:e}):o()}}),console.log(U),new this._winRef.nativeWindow.Razorpay(U).open()})}};t.\u0275fac=function(i){return new(i||t)(I(Te),I(te),I(z))},t.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();function wt(r,t){if(r&1){let m=P();l(0,"li",12)(1,"span",13),s(2),n(),l(3,"div",14),_("click",function(){let i=v(m).index,o=b(2);return x(o.removeFile(i))}),u(4,"i",15),n()()}if(r&2){let m=t.$implicit,e=b(2);a(2),Ee("",m.name," (",e.formatFileSize(m.size),")")}}function Pt(r,t){if(r&1&&(l(0,"div",9)(1,"h5"),s(2,"Selected Files"),n(),l(3,"ul",10),f(4,wt,5,2,"li",11),n()()),r&2){let m=b();a(3),ye("height",m.selectedFileNames.length?"max-height:220px":"height:auto"),a(),c("ngForOf",m.selectedFileNames)}}var ie=(()=>{let t=class t{constructor(){this.selectedFileNames=[],this.fileSelected=new be}openFileInput(){document.getElementById("fileInput").click()}handleFileChange(e){let i=e.target.files;if(i){let o=Array.from(i);this.fileSelected.emit(o);for(let p=0;p<i.length;p++)this.selectedFileNames.push({name:i[p].name,size:i[p].size})}}formatFileSize(e){let i=["B","KB","MB","GB"],o=0;for(;e>=1024&&o<i.length-1;)e/=1024,o++;return`${e.toFixed(2)} ${i[o]}`}removeFile(e){this.selectedFileNames.splice(e,1)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-file-drop"]],outputs:{fileSelected:"fileSelected"},standalone:!0,features:[Fe],decls:15,vars:1,consts:[["id","app"],[1,"container"],[1,"file-input-box"],[1,"wrapper-file-input"],[1,"input-box",3,"click"],[1,"fa-solid","fa-upload"],["id","fileInput","type","file","hidden","","multiple","",3,"change"],[1,"wrapper-file-section"],["class","selected-files",4,"ngIf"],[1,"selected-files"],[1,"file-list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"name"],[1,"remove",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(i,o){i&1&&(l(0,"div",0)(1,"h2"),s(2,"Upload Files"),n(),l(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4),_("click",function(){return o.openFileInput()}),l(7,"h4"),u(8,"i",5),s(9," Choose File to upload "),n(),l(10,"input",6),_("change",function(g){return o.handleFileChange(g)}),n()(),l(11,"small"),s(12,"Files Supported: PDF, TEXT, DOC, DOCX, JPG, PNG, SVG"),n()(),l(13,"div",7),f(14,Pt,5,3,"div",8),n()()()()),i&2&&(a(14),c("ngIf",o.selectedFileNames.length))},dependencies:[B,$,S],styles:["[_ngcontent-%COMP%]:root{--primary: #d90429;--secondary: #1b2631;--border: #8d99ae}[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 6px #0003;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{box-shadow:inset 0 0 6px #0006;background-color:#1b2631;border-radius:10px}#app[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;border-radius:10px;box-shadow:0 5px 10px #00000080;width:100%;height:auto;background-color:#fff;padding:20px}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{padding:20px;display:grid;place-items:center;border:2px dashed #cacaca;border-radius:5px;margin-bottom:5px;cursor:pointer}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#a3a3a3}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   .wrapper-file-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:10px}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   .wrapper-file-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]{overflow-y:auto;list-style-type:none;padding:0 10px 10px 0;margin:0;transition:.3s all ease-in-out}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   .wrapper-file-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border:1px solid #cacaca;border-radius:5px;padding:10px;font-size:14px}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   .wrapper-file-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:5px}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   .wrapper-file-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{display:grid;place-items:center;color:#c0392b;cursor:pointer;transition:.3s all ease-in-out}#app[_ngcontent-%COMP%]   .file-input-box[_ngcontent-%COMP%]   .wrapper-file-section[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]:hover{color:#e74c3c}"]});let r=t;return r})();var Ft=["skillInput"],pt=r=>({hidden:r});function Mt(r,t){r&1&&(l(0,"mat-error"),s(1,"Service title is required"),n())}function kt(r,t){r&1&&(l(0,"mat-error"),s(1,"Price per hour is required"),n())}function It(r,t){r&1&&(l(0,"mat-error"),s(1,"Price per hour cannot be less than 0"),n())}function Ot(r,t){if(r&1){let m=P();l(0,"mat-chip-row",30),_("removed",function(){let i=v(m).$implicit,o=b();return x(o.remove(i))}),s(1),l(2,"button",31)(3,"mat-icon"),s(4,"cancel"),n()()()}if(r&2){let m=t.$implicit;a(),A(" ",m," "),a(),xe("aria-label","remove "+m)}}function Nt(r,t){if(r&1&&(l(0,"mat-option",32),s(1),n()),r&2){let m=t.$implicit;c("value",m),a(),A(" ",m," ")}}function Tt(r,t){r&1&&(l(0,"mat-error"),s(1,"Description is required"),n())}function Ut(r,t){if(r&1){let m=P();l(0,"div",33)(1,"h3",34),s(2),n(),l(3,"p",35),s(4),pe(5,"currency"),l(6,"span",36),s(7,"/month"),n()(),l(8,"p",37),s(9),n(),l(10,"p",38),s(11),n(),l(12,"div",39)(13,"button",40),_("click",function(){let i=v(m).$implicit,o=b();return x(o.buy(i.id))}),s(14," Buy now "),oe(),l(15,"svg",41),u(16,"path",42),n()()()()}if(r&2){let m=t.$implicit;a(2),se(m.title),a(2),A(" ",ke(5,4,m.price,"INR")," "),a(5),A("",m.duration," Month"),a(2),se(m.description)}}function Vt(r,t){r&1&&(l(0,"div",43),oe(),l(1,"svg",44),u(2,"path",45),n(),_e(),l(3,"span",46),s(4,"This list is currently empty."),n()())}var mt=(()=>{let t=class t{constructor(){this.profileService=d(O),this.authService=d(q),this.razorpay=d(at),this.alert=d(N),this.winRef=d(te),this.announcer=d(Ve),this.fb=d(Y),this.router=d(E),this.plans=[],this.separatorKeysCodes=[13,188],this.skills=[],this.allSkills=[],this.ServiceOptions=[],this.showPlans=!1,this.onSuccess=e=>M(this,null,function*(){let i=this.subscriptionForm.value,o=re(V(V(V({},this.globelSubscription),e),i),{perHourPrice:+i.perHourPrice,skills:i.skills});console.log(o),this.profileService.Subscribe(o).subscribe({complete:()=>{this.alert.success("Payment successfully completed"),this.alert.warning("Please login again"),this.authService.logout(),this.router.navigate(["/auth/sign-in"])},error:p=>{this.alert.error(`${p.error}, ${p.status}`),console.log(p)}})}),this.subscriptionForm=this.fb.group({perHourPrice:["",[w.required,w.min(0)]],serviceTitle:["",w.required],skills:["",w.required],description:["",w.required]}),this.skillsInputCrl=this.subscriptionForm.get("skillCtrl")}ngOnInit(){this.profileService.getAllPlans().subscribe({next:e=>{e&&Array.isArray(e.$values)?this.plans=e.$values:Array.isArray(e)?this.plans=e:(console.error("Unexpected response format:",e),this.plans=[]),console.log("Plans:",this.plans)},error:e=>{console.error("Error fetching plans:",e),this.plans=[]}}),this.filteredSkills=this.subscriptionForm.get("skillCtrl")?.valueChanges.pipe(he(null),fe(e=>e?this.skills_filter(e):this.allSkills.slice()))}buy(e){if(this.subscriptionForm.invalid){this.alert.warning("Please fill the below inputs before payment");return}e?this.profileService.get().subscribe({next:i=>{this.razorpay.pay(e,this.onSuccess,()=>{this.alert.error("Payment failed")},{email:i.email,name:i.firstName,phone:i.role})}}):this.alert.error("Id is "+e)}add(e){let i=(e.value||"").trim();i&&(i.includes(",")?this.skills.push(...i.split(",")):this.skills.push(i)),e.chipInput.clear(),this.subscriptionForm.get("skillCtrl")?.setValue(null)}remove(e){let i=this.skills.indexOf(e);i>=0&&(this.skills.splice(i,1),this.announcer.announce(`Removed ${e}`))}selected(e){this.skills.push(e.option.viewValue),this.skillInput.nativeElement.value="",this.subscriptionForm.get("skillCtrl").setValue(null)}onFileSelected(e){if(e&&e.length>0){let i=e[0];i&&this.profileService.uploadWorkerDoc(i).subscribe({next:o=>{this.globelSubscription=re(V({},this.globelSubscription),{certificationUrl:o.docUrl}),this.alert.success("Documents uploaded")},error:o=>{console.log(o),this.alert.error(`${o.error}: ${o.status}`)}})}}onContinue(){this.subscriptionForm.valid&&(this.showPlans=!0)}goBack(){this.showPlans=!1}skills_filter(e){let i=e.toLowerCase();return this.allSkills.filter(o=>o.toLowerCase().includes(i))}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-upgrade"]],viewQuery:function(i,o){if(i&1&&Se(Ft,5),i&2){let p;we(p=Pe())&&(o.skillInput=p.first)}},decls:54,vars:22,consts:[["chipGrid",""],["skillInput",""],["auto","matAutocomplete"],[1,"py-12"],[1,"container","mx-auto"],[1,"flex","justify-center","w-full"],[1,"w-2/3"],[1,"transition-all","duration-500",3,"ngClass"],[3,"ngSubmit","formGroup"],[1,"w-full"],["matInput","","formControlName","serviceTitle","placeholder","Enter service title"],[4,"ngIf"],["type","number","matInput","","formControlName","perHourPrice","placeholder","Enter price per hour"],["aria-label","Enter your skills"],[3,"removed",4,"ngFor","ngForOf"],["placeholder","ex. perfection","formControlName","skills",3,"matChipInputTokenEnd","matChipInputFor","matAutocomplete","matChipInputSeparatorKeyCodes"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","description","placeholder","Enter description"],[1,"text-xl","font-semibold","text-blue-900"],[1,"w-full",3,"fileSelected"],[1,"mt-4","flex","justify-end"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"w-full","flex","justify-center","p-5"],[1,"text-3xl","font-bold","text-center","text-purple-700","mb-8"],[1,"grid","gap-6","md:grid-cols-2","lg:grid-cols-3"],["class","flex flex-col items-center bg-white shadow-lg rounded-lg p-6 transform hover:scale-105 transition duration-300",4,"ngFor","ngForOf","ngForTrack"],["class","flex items-center justify-center h-20 rounded-md border border-gray-300 bg-white",4,"ngIf"],[1,"mt-4","flex","justify-start"],["mat-raised-button","","color","primary",3,"click"],[3,"removed"],["matChipRemove","","type","button"],[3,"value"],[1,"flex","flex-col","items-center","bg-white","shadow-lg","rounded-lg","p-6","transform","hover:scale-105","transition","duration-300"],[1,"text-xl","font-semibold","text-blue-700"],[1,"text-3xl","font-bold","text-purple-700","mt-4"],[1,"text-lg","text-gray-500"],[1,"text-gray-600","mt-2"],[1,"text-gray-600","mt-4"],[1,"border-t","border-gray-300","p-6","text-center","rounded-bl-lg"],["type","button",1,"flex","items-center","mt-auto","text-white","bg-indigo-500","border-0","py-2","px-4","w-full","focus:outline-none","hover:bg-indigo-600","rounded",3,"click"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","viewBox","0 0 24 24",1,"w-4","h-4","ml-auto"],["d","M5 12h14M12 5l7 7-7 7"],[1,"flex","items-center","justify-center","h-20","rounded-md","border","border-gray-300","bg-white"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-8","h-8","text-gray-400"],["fill-rule","evenodd","d","M8 9l4-4L12 20 8 16 4 12z","clip-rule","evenodd"],[1,"text-gray-500","text-sm","ml-2"]],template:function(i,o){if(i&1){let p=P();l(0,"section",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"form",8),_("ngSubmit",function(){return v(p),x(o.onContinue())}),l(6,"mat-form-field",9)(7,"mat-label"),s(8,"Service Title"),n(),u(9,"input",10),f(10,Mt,2,0,"mat-error",11),n(),l(11,"mat-form-field",9)(12,"mat-label"),s(13,"Price / Hour"),n(),u(14,"input",12),f(15,kt,2,0,"mat-error",11)(16,It,2,0,"mat-error",11),n(),l(17,"mat-form-field",9)(18,"mat-label"),s(19,"Skills"),n(),l(20,"mat-chip-grid",13,0),f(22,Ot,5,2,"mat-chip-row",14),n(),l(23,"input",15,1),_("matChipInputTokenEnd",function(h){return v(p),x(o.add(h))}),n(),l(25,"mat-autocomplete",16,2),_("optionSelected",function(h){return v(p),x(o.selected(h))}),f(27,Nt,2,2,"mat-option",17),pe(28,"async"),n()(),l(29,"mat-form-field",9)(30,"mat-label"),s(31,"Description"),n(),u(32,"textarea",18),f(33,Tt,2,0,"mat-error",11),n(),l(34,"h2",19),s(35,"Upload your resume here (optional)"),n(),l(36,"app-file-drop",20),_("fileSelected",function(h){return v(p),x(o.onFileSelected(h))}),n(),l(37,"div",21)(38,"button",22),s(39," Continue "),l(40,"mat-icon"),s(41,"arrow_forward"),n()()()()(),l(42,"div",7)(43,"div",23)(44,"h2",24),s(45,"Subscription Plans"),n()(),l(46,"div",25),f(47,Ut,17,7,"div",26)(48,Vt,5,0,"div",27),n(),l(49,"div",28)(50,"button",29),_("click",function(){return v(p),x(o.goBack())}),l(51,"mat-icon"),s(52,"arrow_back"),n(),s(53," Go Back "),n()()()()()()()}if(i&2){let p,g,h,y,U=le(21),ce=le(26);a(4),c("ngClass",ae(18,pt,o.showPlans)),a(),c("formGroup",o.subscriptionForm),a(5),c("ngIf",(p=o.subscriptionForm.get("serviceTitle"))==null?null:p.hasError("required")),a(5),c("ngIf",(g=o.subscriptionForm.get("perHourPrice"))==null?null:g.hasError("required")),a(),c("ngIf",(h=o.subscriptionForm.get("perHourPrice"))==null?null:h.hasError("min")),a(6),c("ngForOf",o.skills),a(),c("matChipInputFor",U)("matAutocomplete",ce)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),a(4),c("ngForOf",Me(28,16,o.filteredSkills)),a(6),c("ngIf",(y=o.subscriptionForm.get("description"))==null?null:y.hasError("required")),a(5),c("disabled",!o.subscriptionForm.valid),a(4),c("ngClass",ae(20,pt,!o.showPlans)),a(5),c("ngForOf",o.plans)("ngForTrack",o.plan),a(),c("ngIf",(o.plans==null?null:o.plans.length)===0)}},dependencies:[Ie,$,S,De,je,Le,qe,Ge,ze,Ae,We,Qe,Ye,Ze,Je,Xe,Q,H,Re,K,W,J,X,ie,Oe,Ne]});let r=t;return r})();function Dt(r,t){r&1&&(l(0,"mat-tab",4),u(1,"app-upgrade"),n())}var ct=(()=>{let t=class t{constructor(){this.profileStore=d(T),this.userRole=L.Role_Customer}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=C({type:t,selectors:[["app-layout"]],decls:7,vars:1,consts:[["id","Profile"],["label","Profile"],["label","Security"],["label","Upgrade",4,"ngIf"],["label","Upgrade"]],template:function(i,o){if(i&1&&(l(0,"section",0)(1,"mat-tab-group")(2,"mat-tab",1),u(3,"app-edit-profile"),n(),l(4,"mat-tab",2),u(5,"app-security"),n(),f(6,Dt,2,0,"mat-tab",3),n()()),i&2){let p;a(6),c("ngIf",((p=o.profileStore.user())==null?null:p.role)==o.userRole)}},dependencies:[S,He,Ke,lt,st,mt]});let r=t;return r})();var jt=[{path:"",component:ct}],dt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=R({type:t}),t.\u0275inj=j({imports:[me.forChild(jt),me]});let r=t;return r})();var xr=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=R({type:t}),t.\u0275inj=j({imports:[B,dt,Z,et,$e,Be,tt,nt,ie,ot]});let r=t;return r})();export{xr as ProfileModule};
