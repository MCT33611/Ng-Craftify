import{a as y}from"./chunk-BWDK4YJ7.js";import{a as E}from"./chunk-74CHJCYH.js";import{B as R,C as N,G as q,I as A,J as D,N as k,P as I,p as S,x as T,z as P}from"./chunk-WEBSOFYO.js";import{$b as x,Ab as n,Bb as h,Ib as F,Kb as v,Tb as l,Wa as m,Xa as p,ja as b,nb as c,pb as C,rb as g,ub as u,zb as s}from"./chunk-JPTIIQB7.js";function M(e){let t=e.value;return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[\W]).{8,}$/.test(t)?null:{weakPassword:!0}}function V(e){let t=e.get("password")?.value,a=e.get("confirmPassword")?.value;return t===a?null:{passwordsDoNotMatch:!0}}function j(e,t){e&1&&(s(0,"p",7),l(1,"Password is required"),n())}function G(e,t){e&1&&(s(0,"p",7),l(1,"your password is too week"),n())}function $(e,t){if(e&1&&c(0,j,2,0,"p",7)(1,G,2,0,"p",7),e&2){let a,o,r=v();u(0,(a=r.resetForm.get("password"))!=null&&a.hasError("required")?0:-1),m(),u(1,(o=r.resetForm.get("password"))!=null&&o.hasError("weakPassword")?1:-1)}}function z(e,t){e&1&&(s(0,"p",7),l(1,"Confirm Password is required"),n())}function B(e,t){e&1&&(s(0,"p",7),l(1,"Confirm Password is not matching"),n())}function W(e,t){if(e&1&&c(0,z,2,0,"p",7)(1,B,2,0,"p",7),e&2){let a,o,r=v();u(0,(a=r.resetForm.get("confirmPassword"))!=null&&a.hasError("required")?0:-1),m(),u(1,(o=r.resetForm.get("confirmPassword"))!=null&&o.hasError("passwordsDoNotMatch")?1:-1)}}var ee=(()=>{let t=class t{constructor(o,r,i,d){this._fb=o,this._auth=r,this._router=i,this._alert=d,this.redirectTo="/auth/sign-in",this.resetForm=this._fb.group({password:["",[P.required,M]],confirmPassword:["",[P.required]]},{validators:V})}onPasswordSubmit(){this.resetForm.valid?this._auth.resetPassword(this.email,this.resetForm.value.password).subscribe({complete:()=>{this._alert.success("password changed successfully"),this.redirectTo&&this._router.navigate([this.redirectTo])},error:o=>{this._alert.error(`${o.status} : ${o.error.title}`)}}):this._alert.warning("cridentials are not valid")}};t.\u0275fac=function(r){return new(r||t)(p(k),p(y),p(S),p(E))},t.\u0275cmp=b({type:t,selectors:[["app-password-reset-form"]],inputs:{email:"email",redirectTo:"redirectTo"},standalone:!0,features:[x],decls:13,vars:7,consts:[[1,"login-form",3,"submit","formGroup"],[1,"mb-4"],["for","password",1,"text-gray-700","block","mb-2"],["formControlName","password","type","password","id","password",1,"w-full","px-4","py-2","rounded-lg","border","focus:border-blue-500","focus:outline-none"],["for","confirmPassword",1,"text-gray-700","block","mb-2"],["formControlName","confirmPassword","type","password","id","confirmPassword",1,"w-full","px-4","py-2","rounded-lg","border","focus:border-blue-500","focus:outline-none"],["type","submit",1,"w-full","bg-[#1A826A]","text-white","font-semibold","py-3","rounded-lg","hover:bg-green-700","focus:outline-none","focus:bg-green-700","transition","duration-300"],[1,"text-red-500","text-thin"]],template:function(r,i){if(r&1&&(s(0,"form",0),F("submit",function(){return i.onPasswordSubmit()}),s(1,"div",1)(2,"label",2),l(3,"Password"),n(),h(4,"input",3),c(5,$,2,2),n(),s(6,"div",1)(7,"label",4),l(8,"Confirm Password"),n(),h(9,"input",5),c(10,W,2,2),n(),s(11,"button",6),l(12," save "),n()()),r&2){let d,f,w,_;C("formGroup",i.resetForm),m(4),g("border-red-500",((d=i.resetForm.get("password"))==null?null:d.invalid)&&((d=i.resetForm.get("password"))==null?null:d.touched)),m(),u(5,(f=i.resetForm.get("password"))!=null&&f.invalid&&((f=i.resetForm.get("password"))!=null&&f.touched)?5:-1),m(4),g("border-red-500",((w=i.resetForm.get("confirmPassword"))==null?null:w.invalid)&&((w=i.resetForm.get("confirmPassword"))==null?null:w.touched)),m(),u(10,(_=i.resetForm.get("confirmPassword"))!=null&&_.invalid&&((_=i.resetForm.get("confirmPassword"))!=null&&_.touched)?10:-1)}},dependencies:[I,q,T,R,N,A,D]});let e=t;return e})();export{V as a,M as b,ee as c};
